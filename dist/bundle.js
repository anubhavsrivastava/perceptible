!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("Perceptor",[],e):"object"==typeof exports?exports.Perceptor=e():t.Perceptor=e()}(window,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"DOMSubscriber",function(){return i}),n.d(r,"consoleSubscriber",function(){return u});const o=document.createElement("div");o.id="dreporter",document.body.appendChild(o),o.style.backgroundColor="#e5e5e5",o.style.width="auto",o.style.position="fixed",o.style.bottom="0",o.style.left="0";var i=(t,e)=>{o.innerHTML=function(t){return`<pre>${JSON.stringify(t,void 0,4)}</pre>`}(e)},u=function(t,e){console.log(e)};var c={threshold:100,watchMode:"interval",watchInterval:1e3,reporter:i};class s{constructor(){this.chain=[],this.prevResult={}}use(t){return this.chain.push(t),this.chain.length-1}eject(t){this.chain[t]&&(this.chain[t]=null)}run(t){const e=this.chain.reduce((e,n)=>(n&&(e=Object.assign(e,n(t,e,this.prevResult))),e),Object.assign({},this.prevResult));return this.prevResult=e,e}}const l=function(){return document.documentElement&&document.documentElement.clientHeight?{...f(),height:document.documentElement.clientHeight,width:document.documentElement.clientWidth}:{left:0,right:0,width:0,height:0}},f=function(){return{left:window.pageXOffset,top:window.pageYOffset}},d=function(t){let e=function(t){let e=t.getBoundingClientRect();return{left:e.left,top:e.top,height:e.height,width:e.width}}(t),n=f();return{left:e.left+n.left,top:e.top+n.top,height:e.height,width:e.width}};function h(t){let e=d(t.element),n=l();return a(n,e,t.config)}const a=function(t,e,n){const r=n&&void 0!==n.threshold?n.threshold:100,o=e.left+e.width,i=t.left+t.width,u=e.top+e.height,c=t.top+t.height,s=e.left>=t.left&&e.left<=i,l=o<=i&&o>=t.left,f=e.top>=t.top&&e.top<=c,d=u<=c&&u>t.top,h={};return((t,e,n,r)=>t&&n||t&&r||e&&n||e&&r)(s,l,f,d)&&(h.left=s?e.left:t.left,h.right=l?o:i,h.top=f?e.top:t.top,h.bottom=d?u:c,h.surface=(h.right-h.left)/e.width*(h.bottom-h.top)/e.height*100),{isVisible:h.surface>=r,subView:h}};function p(){return{time:(new Date).getTime()}}function g(t){const{element:e={}}=t;return{element:{id:e.id,tagName:e.tagName}}}function m(t,e,n){let{duration:r=0}=n;return e.isVisible&&n.isVisible&&(r+=e.time-n.time),{duration:r}}var b=()=>{const t=new s;return t.use(p),t.use(g),t.use(h),t.use(m),t};class w{constructor(t,e={}){this.element=t,this.spectators=b(),this.config=Object.assign({},c,w.defaults,e)}watch(){this.handleId=setInterval(()=>this.config.reporter(this,{...this.spectators.run(this)}),500)}unwatch(){clearInterval(this.handleId)}}w.defaults=Object.assign({},c),w.subscribers=r;e.default=w}]).default});
//# sourceMappingURL=bundle.js.map