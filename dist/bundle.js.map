{"version":3,"sources":["webpack://Perceptor/webpack/universalModuleDefinition","webpack://Perceptor/webpack/bootstrap","webpack://Perceptor/./src/reporters/domReporter.js","webpack://Perceptor/./src/reporters/consoleReporter.js","webpack://Perceptor/./src/defaultConfig.js","webpack://Perceptor/./src/view.js","webpack://Perceptor/./src/index.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","mainContainer","document","createElement","id","body","appendChild","style","backgroundColor","width","position","bottom","left","domReporter","perceptorInstance","context","innerHTML","JSON","stringify","undefined","paintObjectOnContainer","consoleReporter","console","group","log","groupEnd","defaultConfig","threshold","watchMode","watchInterval","reporter","getCurrentViewport","documentElement","clientHeight","getCurrentScrollPosition","height","clientWidth","right","pageXOffset","top","pageYOffset","getCurrentViewportElementPosition","node","getBoundingClientRect","getElementPosition","scrollPos","isBoxed","container","nodeRight","containerRight","nodeBottom","containerBottom","leftCoordinates","rightCoordinates","topCoordinates","bottomCoordinates","subView","lc","rc","tc","bc","hasIntersectingArea","surface","src_Perceptor","[object Object]","DOMElement","options","this","element","config","assign","defaults","handleId","setInterval","ele","view","has","a","viewBox","clearInterval","reporters","reporters_namespaceObject","__webpack_exports__"],"mappings":"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","file":"bundle.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"Perceptor\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Perceptor\"] = factory();\n\telse\n\t\troot[\"Perceptor\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","// This reporter requires DOM Element which will be Absolute display,\n\nconst mainContainer = document.createElement('div');\nmainContainer.id = 'dreporter';\ndocument.body.appendChild(mainContainer);\n\nmainContainer.style.backgroundColor = '#e5e5e5';\nmainContainer.style.width = 'auto';\nmainContainer.style.position = 'fixed';\nmainContainer.style.bottom = '0';\nmainContainer.style.left = '0';\n\nvar paintObjectOnContainer = function(o) {\n\treturn `<pre>${JSON.stringify(o, undefined, 4)}</pre>`;\n};\n\nexport default (perceptorInstance, context) => {\n\tmainContainer.innerHTML = paintObjectOnContainer(context);\n};\n","export default function(perceptorInstance, context) {\n\tconsole.group(perceptorInstance.name); //eslint-disable-line\n\tconsole.log(context); //eslint-disable-line\n\tconsole.groupEnd(perceptorInstance.name); //eslint-disable-line\n}\n","//eslint-disable-next-line\nimport { consoleReporter, DOMReporter } from './reporters';\n\nconst config = {\n\t//\n\t//This denotes the threshold (Percentage) of surface area that an Element is considered to be visible\n\t// e.g, a. if threshold is 100, & if 100% of the Element is visible, it will be considered as visible\n\t// \t\tb. if threshold is 20, & %age element visibility >20 , it will be considered as visible\n\tthreshold: 100,\n\twatchMode: 'interval', // interval, scroll, raf\n\twatchInterval: 1000, // ms of interval time\n\treporter: DOMReporter\n};\n\nexport default config;\n","export const getCurrentViewport = function() {\n\tif (document.documentElement && document.documentElement.clientHeight) {\n\t\treturn { ...getCurrentScrollPosition(), height: document.documentElement.clientHeight, width: document.documentElement.clientWidth };\n\t}\n\treturn { left: 0, right: 0, width: 0, height: 0 };\n};\n\nexport const getCurrentScrollPosition = function() {\n\treturn { left: window.pageXOffset, top: window.pageYOffset };\n};\n\nexport const getElementPosition = function(node) {\n\tlet position = node.getBoundingClientRect();\n\treturn { left: position.left, top: position.top, height: position.height, width: position.width };\n};\n\nexport const getCurrentViewportElementPosition = function(node) {\n\tlet position = getElementPosition(node);\n\tlet scrollPos = getCurrentScrollPosition();\n\treturn { left: position.left + scrollPos.left, top: position.top + scrollPos.top, height: position.height, width: position.width };\n};\n\nconst hasIntersectingArea = (lc, rc, tc, bc) => {\n\treturn (lc && tc) || (lc && bc) || (rc && tc) || (rc && bc);\n};\n\nexport const isBoxed = function(container, node) {\n\tconst nodeRight = node.left + node.width;\n\tconst containerRight = container.left + container.width;\n\tconst nodeBottom = node.top + node.height;\n\tconst containerBottom = container.top + container.height;\n\n\tconst leftCoordinates = node.left >= container.left && node.left <= containerRight;\n\tconst rightCoordinates = nodeRight <= containerRight && nodeRight >= container.left;\n\tconst topCoordinates = node.top >= container.top && node.top <= containerBottom;\n\tconst bottomCoordinates = nodeBottom <= containerBottom && nodeBottom > container.top;\n\n\tconst subView = {};\n\n\tif (hasIntersectingArea(leftCoordinates, rightCoordinates, topCoordinates, bottomCoordinates)) {\n\t\tsubView.left = leftCoordinates ? node.left : container.left;\n\t\tsubView.right = rightCoordinates ? nodeRight : containerRight;\n\t\tsubView.top = topCoordinates ? node.top : container.top;\n\t\tsubView.bottom = bottomCoordinates ? nodeBottom : containerBottom;\n\t\tsubView.surface = ((((subView.right - subView.left) / node.width) * (subView.bottom - subView.top)) / node.height) * 100;\n\t}\n\n\treturn { leftCoordinates, rightCoordinates, topCoordinates, bottomCoordinates, subView };\n};\n","import defaultConfig from './defaultConfig';\nimport * as reporters from './reporters';\n\nimport { isBoxed, getCurrentViewportElementPosition, getCurrentViewport } from './view';\n\nclass Perceptor {\n\tconstructor(DOMElement, options = {}) {\n\t\tthis.element = DOMElement;\n\t\tthis.config = Object.assign({}, defaultConfig, Perceptor.defaults, options);\n\t}\n\n\twatch() {\n\t\tthis.handleId = setInterval(() => {\n\t\t\tlet ele = getCurrentViewportElementPosition(this.element);\n\t\t\tlet view = getCurrentViewport();\n\t\t\treturn this.config.reporter(this, { has: isBoxed(view, ele), a: ele, viewBox: view });\n\t\t}, 1000);\n\t}\n\n\tunwatch() {\n\t\tclearInterval(this.handleId);\n\t}\n}\n\nPerceptor.defaults = Object.assign({}, defaultConfig);\nPerceptor.reporters = reporters;\n\nexport default Perceptor;\n"],"sourceRoot":""}